# üõçÔ∏è API de Administraci√≥n de Productos

Una API REST completa desarrollada en **Node.js** con **TypeScript** para la gesti√≥n de productos. Esta aplicaci√≥n demuestra habilidades en desarrollo backend, bases de datos, testing y documentaci√≥n de APIs.

## ‚ú® Caracter√≠sticas

- **üîß Stack Tecnol√≥gico Moderno**: Node.js, TypeScript, Express.js
- **üóÑÔ∏è Base de Datos**: PostgreSQL con Sequelize ORM
- **üìö Documentaci√≥n Autom√°tica**: Swagger/OpenAPI integrado con documentaci√≥n profesional
- **üß™ Testing Completo**: Jest con supertest para testing de endpoints
- **üõ°Ô∏è Validaci√≥n de Datos**: Express-validator para validaci√≥n robusta
- **üîí Seguridad**: CORS configurado, validaci√≥n de entrada, Autenticaci√≥n JWT
- **üìä Logging**: Morgan para logging de requests
- **üé® UI Personalizada**: Documentaci√≥n con logo y favicon personalizados

## üöÄ Tecnolog√≠as Utilizadas

### Backend
- **Node.js** - Runtime de JavaScript
- **TypeScript** - Tipado est√°tico para mayor robustez
- **Express.js** - Framework web para Node.js
- **Sequelize** - ORM para PostgreSQL
- **PostgreSQL** - Base de datos relacional

### Testing & Desarrollo
- **Jest** - Framework de testing
- **Supertest** - Testing de APIs HTTP
- **Nodemon** - Auto-reload en desarrollo
- **ts-node** - Ejecuci√≥n directa de TypeScript

### Documentaci√≥n & Herramientas
- **Swagger/OpenAPI** - Documentaci√≥n autom√°tica de API
- **Morgan** - Logging de requests HTTP
- **Express-validator** - Validaci√≥n de datos de entrada
- **CORS** - Configuraci√≥n de pol√≠ticas de origen cruzado

## üìã Endpoints Disponibles

### üîê Autenticaci√≥n
| M√©todo | Endpoint | Descripci√≥n | Autenticaci√≥n |
|--------|----------|-------------|---------------|
| `POST` | `/api/auth/register` | Registrar nuevo usuario | P√∫blico |
| `POST` | `/api/auth/login` | Iniciar sesi√≥n | P√∫blico |
| `GET` | `/api/auth/profile` | Obtener perfil del usuario | JWT |

### üõçÔ∏è Productos
| M√©todo | Endpoint | Descripci√≥n | Autenticaci√≥n |
|--------|----------|-------------|---------------|
| `GET` | `/api/products` | Obtener todos los productos | P√∫blico |
| `GET` | `/api/products/:id` | Obtener producto por ID | P√∫blico |
| `POST` | `/api/products` | Crear nuevo producto | Admin |
| `PUT` | `/api/products/:id` | Actualizar producto completo | Admin |
| `PATCH` | `/api/products/:id` | Cambiar disponibilidad del producto | Admin |
| `DELETE` | `/api/products/:id` | Eliminar producto | Admin |

## üóÑÔ∏è Modelo de Datos

### Producto
```typescript
interface Product {
  id: number;           // ID auto-generado
  name: string;         // Nombre del producto (m√°x. 100 caracteres)
  price: number;        // Precio del producto (m√≠nimo 0)
  availability: boolean; // Disponibilidad (default: true)
  createdAt: Date;      // Fecha de creaci√≥n
  updatedAt: Date;      // Fecha de √∫ltima actualizaci√≥n
}
```

### Usuario
```typescript
interface User {
  id: number;           // ID auto-generado
  email: string;        // Email √∫nico del usuario
  name: string;         // Nombre completo (2-50 caracteres)
  role: 'admin' | 'user'; // Rol del usuario
  createdAt: Date;      // Fecha de creaci√≥n
  updatedAt: Date;      // Fecha de √∫ltima actualizaci√≥n
}
```

## üõ†Ô∏è Instalaci√≥n y Configuraci√≥n

### Prerrequisitos
- Node.js (v16 o superior)
- PostgreSQL
- npm o yarn

### 1. Clonar el repositorio
```bash
git clone https://github.com/gabrielbustosdev/administrador-de-productos-api-server.git
cd administrador-de-productos-api-server
```

### 2. Instalar dependencias
```bash
npm install
```

### 3. Configurar variables de entorno
Crear un archivo `.env` en la ra√≠z del proyecto:
```env
DATABASE_URL=postgresql://usuario:password@localhost:5432/nombre_db
PORT=4000
FRONTEND_URL=http://localhost:3000
JWT_SECRET=tu_clave_secreta_muy_segura_aqui
```

### 4. Crear usuario administrador (opcional)
```bash
npm run create-admin
```

### 5. Ejecutar el proyecto

**Desarrollo:**
```bash
npm run dev
```

**Producci√≥n:**
```bash
npm run build
npm start
```

## üß™ Testing

### Ejecutar todos los tests
```bash
npm test
```

### Ejecutar tests con coverage
```bash
npm run test:coverage
```

## üìö Documentaci√≥n de la API

Una vez que el servidor est√© ejecut√°ndose, puedes acceder a la documentaci√≥n interactiva de la API en:

```
http://localhost:4000/docs
```

### üåê Usar la Documentaci√≥n desde el Navegador

La documentaci√≥n de Swagger est√° **completamente configurada** para funcionar desde el navegador. Puedes:

#### ‚úÖ **Hacer Consultas Directas**
- **Probar endpoints**: Usa el bot√≥n "Try it out" en cada endpoint
- **Enviar requests**: Completa los par√°metros y ejecuta las consultas
- **Ver responses**: Obt√©n respuestas reales de la API
- **Autenticaci√≥n**: Configura tokens JWT para endpoints protegidos

#### ‚úÖ **Configuraci√≥n Autom√°tica**
- **CORS habilitado**: Requests desde navegador permitidos
- **Headers autom√°ticos**: Content-Type y Authorization configurados
- **Logs de debugging**: Console logs para monitorear requests
- **Persistencia de tokens**: Los tokens se mantienen entre sesiones

#### ‚úÖ **Caracter√≠sticas de la Documentaci√≥n**

- **üìñ Documentaci√≥n Completa**: Todos los endpoints con descripciones detalladas
- **üîê Autenticaci√≥n JWT**: Configuraci√≥n autom√°tica de tokens
- **üìù Esquemas de Datos**: Modelos completos con validaciones
- **‚úÖ Ejemplos de Uso**: Requests y responses de ejemplo
- **üé® Interfaz Personalizada**: Logo y favicon del proyecto
- **üîç Filtros y B√∫squeda**: Navegaci√≥n mejorada
- **üì± Responsive**: Compatible con dispositivos m√≥viles

### C√≥mo Usar la Documentaci√≥n

1. **Acceder a la documentaci√≥n**: Ve a `http://localhost:4000/docs`
2. **Autenticarse**: Usa el bot√≥n "Authorize" para configurar tu token JWT
3. **Explorar endpoints**: Navega por las diferentes secciones (Auth, Products)
4. **Probar endpoints**: Usa la interfaz interactiva para hacer requests
5. **Ver esquemas**: Consulta los modelos de datos en la secci√≥n "Schemas"

### Ejemplo de Uso con cURL

```bash
# Registrar usuario
curl -X POST http://localhost:4000/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{"email":"usuario@ejemplo.com","password":"password123","name":"Juan P√©rez"}'

# Login
curl -X POST http://localhost:4000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"usuario@ejemplo.com","password":"password123"}'

# Crear producto (requiere token de admin)
curl -X POST http://localhost:4000/api/products \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer TU_TOKEN_JWT" \
  -d '{"name":"Laptop Dell XPS 13","price":1299.99}'
```

### üîß Configuraci√≥n T√©cnica

La API est√° configurada con:

- **CORS habilitado** para `localhost:4000`, `localhost:3000`, y otros or√≠genes de desarrollo
- **Headers autom√°ticos** para requests JSON
- **Preflight requests** manejados correctamente
- **Logs de debugging** para monitorear requests desde navegador
- **Persistencia de autorizaci√≥n** en Swagger UI

## üîß Scripts Disponibles

| Script | Descripci√≥n |
|--------|-------------|
| `npm run dev` | Ejecutar en modo desarrollo con nodemon |
| `npm run build` | Compilar TypeScript a JavaScript |
| `npm test` | Ejecutar tests con Jest |
| `npm run test:coverage` | Ejecutar tests con reporte de cobertura |
| `npm run clear` | Limpiar datos de prueba |
| `npm run create-admin` | Crear usuario administrador inicial |

## üèóÔ∏è Arquitectura del Proyecto

```
src/
‚îú‚îÄ‚îÄ config/           # Configuraciones (DB, Swagger)
‚îú‚îÄ‚îÄ handlers/         # Controladores de endpoints
‚îú‚îÄ‚îÄ middleware/       # Middleware personalizado
‚îú‚îÄ‚îÄ models/          # Modelos de Sequelize
‚îú‚îÄ‚îÄ router/          # Definici√≥n de rutas
‚îú‚îÄ‚îÄ __tests__/       # Tests del servidor
‚îî‚îÄ‚îÄ index.ts         # Punto de entrada
```

## üéØ Funcionalidades Destacadas

### ‚úÖ Validaci√≥n Robusta
- Validaci√≥n de tipos de datos
- Validaci√≥n de rangos (precio > 0)
- Mensajes de error personalizados
- Middleware de manejo de errores

### ‚úÖ Testing Completo
- Tests unitarios para cada endpoint
- Validaci√≥n de responses HTTP
- Testing de casos de error
- Cobertura de c√≥digo

### ‚úÖ Documentaci√≥n Profesional
- Swagger UI integrado con configuraci√≥n avanzada
- Documentaci√≥n de esquemas completos
- Ejemplos de uso detallados
- Interfaz personalizada y responsive
- Filtros y b√∫squeda mejorados
- **Consultas desde navegador habilitadas**

### ‚úÖ Seguridad
- CORS configurado
- Validaci√≥n de entrada
- Autenticaci√≥n JWT
- Roles de usuario (admin/user)
- Manejo de errores
- Logging de requests

## üîê Autenticaci√≥n JWT

La API incluye un sistema completo de autenticaci√≥n con JWT:

### Roles de Usuario
- **Admin**: Puede realizar todas las operaciones CRUD en productos
- **User**: Solo puede leer productos (GET)

### Flujo de Autenticaci√≥n
1. **Registro**: `POST /api/auth/register`
2. **Login**: `POST /api/auth/login`
3. **Usar Token**: Incluir en header `Authorization: Bearer <token>`

### Ejemplo de Token JWT
```json
{
  "message": "Login exitoso",
  "user": {
    "id": 1,
    "email": "admin@ejemplo.com",
    "name": "Administrador",
    "role": "admin"
  },
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

## üìä C√≥digos de Estado HTTP

| C√≥digo | Descripci√≥n |
|--------|-------------|
| 200 | OK - Operaci√≥n exitosa |
| 201 | Created - Recurso creado |
| 400 | Bad Request - Datos inv√°lidos |
| 401 | Unauthorized - Token requerido |
| 403 | Forbidden - Permisos insuficientes |
| 404 | Not Found - Recurso no encontrado |
| 409 | Conflict - Recurso ya existe |
| 500 | Internal Server Error - Error del servidor |

## ü§ù Contribuir

1. Fork el proyecto
2. Crea una rama para tu feature (`git checkout -b feature/AmazingFeature`)
3. Commit tus cambios (`git commit -m 'Add some AmazingFeature'`)
4. Push a la rama (`git push origin feature/AmazingFeature`)
5. Abre un Pull Request

## üìÑ Licencia

Este proyecto est√° bajo la Licencia MIT - ver el archivo [LICENSE](LICENSE) para detalles.

## üìû Soporte

Si tienes alguna pregunta o necesitas ayuda:

- üìß Email: gabrielbustosdev@gmail.com
- üìñ Documentaci√≥n: http://localhost:4000/docs
- üêõ Issues: [GitHub Issues](https://github.com/gabrielbustosdev/administrador-de-productos-api-server/issues) 
